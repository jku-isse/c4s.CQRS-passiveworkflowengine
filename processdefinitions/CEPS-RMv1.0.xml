<xml xmlns="https://developers.google.com/blockly/xml">
  <variables>
    <variable id="n~zSfOoBX_-ZfBjz?5GK">IssueFD</variable>
    <variable id="Xg1A%?@40.5oj`/g[|@f">SRS</variable>
    <variable id="x?oi7HVFSa$jZln(Pc[l">WorkProduct</variable>
    <variable id="x[DEUC1Fo-%{4u`GK8vp">FunctionalSpecification</variable>
    <variable id="5o505OVo%.@P^`u|31`P">ReviewReport</variable>
  </variables>
  <block type="procedures_defnoreturn" id="$r{^jOIh(5-K/bYOp*FZ" x="863" y="88">
    <mutation>
      <arg name="IssueFD" varid="n~zSfOoBX_-ZfBjz?5GK"></arg>
      <arg name="SRS" varid="Xg1A%?@40.5oj`/g[|@f"></arg>
    </mutation>
    <field name="NAME">CEPS-SoftwareReqAnalysis-1.0</field>
    <comment pinned="false" h="80" w="160">Describe this function...</comment>
    <statement name="STACK">
      <block type="variables_set" id="2a|ZgaD8v$omN[{^d4y]">
        <field name="VAR" id="n~zSfOoBX_-ZfBjz?5GK">IssueFD</field>
        <value name="VALUE">
          <block type="artifact" id="wq_!X4czU_S??M{K(b:g">
            <field name="Type">azure_workitem</field>
          </block>
        </value>
        <next>
          <block type="variables_set" id="4p|w(^{a5BJ/{4xp#HKd">
            <field name="VAR" id="Xg1A%?@40.5oj`/g[|@f">SRS</field>
            <value name="VALUE">
              <block type="artifact" id="?ouBhFy(6)?P.1U~++tH">
                <field name="Type">azure_workitem</field>
              </block>
            </value>
            <next>
              <block type="artuse" id="Kor66v?S@7S:+C@5f%0%">
                <field name="roletext">Param</field>
                <value name="NAME">
                  <block type="variables_get" id="e/}|X`j^u9Lx1Nd(5liw">
                    <field name="VAR" id="n~zSfOoBX_-ZfBjz?5GK">IssueFD</field>
                  </block>
                </value>
                <next>
                  <block type="artuse" id="!lj#5f89o-l]^w~fqWXk">
                    <field name="roletext">Param</field>
                    <value name="NAME">
                      <block type="variables_get" id="Yt@%TD8iv~-p*2?G5oIx">
                        <field name="VAR" id="Xg1A%?@40.5oj`/g[|@f">SRS</field>
                      </block>
                    </value>
                    <next>
                      <block type="step" id="5b..vf$qL6/pu@Y-uYR)">
                        <field name="StepId">CreateOrUpdateSRS</field>
                        <comment pinned="false" h="80" w="160">input not specified but I suppose it's CR</comment>
                        <statement name="Input">
                          <block type="artuse" id="Wr,z?vCj-zylzo!8knh|">
                            <field name="roletext">Param</field>
                            <value name="NAME">
                              <block type="variables_get" id="uZsaHB5)T$I9XQ1gzL$3">
                                <field name="VAR" id="n~zSfOoBX_-ZfBjz?5GK">IssueFD</field>
                              </block>
                            </value>
                            <next>
                              <block type="artuse" id="@{N-Ny@,+dSUH_GiN!*Y">
                                <field name="roletext">Param</field>
                                <value name="NAME">
                                  <block type="variables_get" id="3=?{jZ!6mll_9()}^r`=">
                                    <field name="VAR" id="Xg1A%?@40.5oj`/g[|@f">SRS</field>
                                  </block>
                                </value>
                              </block>
                            </next>
                          </block>
                        </statement>
                        <statement name="Transitions">
                          <block type="transition" id="bReaJUz6NgWz}o`@M10R">
                            <field name="State">PRECONDITION</field>
                            <comment pinned="true" h="52" w="330">SRS may be empty, if created in this step.</comment>
                            <value name="condition">
                              <block type="text" id=":`lz+i5Asi,S$jd6{N]D">
                                <field name="TEXT">self.in_IssueFD-&gt;forAll(issue | issue.workItemType.name = 'CR Issue FD') and self.in_IssueFD-&gt;size() = 1 and self.in_SRS-&gt;forAll(req | req.workItemType.name='Requirement')</field>
                              </block>
                            </value>
                            <next>
                              <block type="transition" id="NHX6eY%C)Gy4w%r:nUuX">
                                <field name="State">ACTIVATION</field>
                                <comment pinned="true" h="96" w="271">Active as soon as any linked requirement is not in state "Released"</comment>
                                <value name="condition">
                                  <block type="text" id="6%JeJ$`Qqa)iJA$Q}ZWk">
                                    <field name="TEXT">self.in_SRS-&gt;union( self.in_IssueFD-&gt;any()   -&gt;asType(&lt;root/types/azure_workitem&gt;) .relatedItems -&gt;select(link | link.linkType.name.equalsIgnoreCase('Affects')) -&gt;collect(link2 : &lt;root/types/workitem_link&gt; | link2.linkTo) -&gt;select(refitem | refitem.workItemType.name.equalsIgnoreCase('Requirement') ) -&gt;asSet())-&gt;select(req : &lt;root/types/azure_workitem&gt; | req.state.name&lt;&gt;'Released')-&gt;size() &gt; 0</field>
                                  </block>
                                </value>
                                <next>
                                  <block type="transition" id="qmto`*f}i,#}R@/^,8l.">
                                    <field name="State">POSTCONDITION</field>
                                    <value name="condition">
                                      <block type="text" id="4+s7@dAUNwl;MV*lsrnq">
                                        <field name="TEXT">self.in_IssueFD-&gt;forAll(issue | issue.state.name = 'Reviewed')</field>
                                      </block>
                                    </value>
                                  </block>
                                </next>
                              </block>
                            </next>
                          </block>
                        </statement>
                        <statement name="Datamappings">
                          <block type="datamapping" id="_J0MmVwhf$p7=8$b6AhP">
                            <field name="mappingId">CollectSRS</field>
                            <field name="mappingSpec">self.in_SRS-&gt;union(&#10;self.in_IssueFD-&gt;any()&#10;  -&gt;asType(&lt;root/types/azure_workitem&gt;)&#10;.relatedItems&#10;-&gt;select(link | link.linkType.name.equalsIgnoreCase('Related'))&#10;-&gt;collect(link2 : &lt;root/types/workitem_link&gt; | link2.linkTo)&#10;-&gt;select(refitem | refitem.workItemType.name.equalsIgnoreCase('Requirement') )&#10;-&gt;asSet())&#10;-&gt;symmetricDifference(self.out_SRS)&#10; -&gt;size() = 0&#10;&#10;  </field>
                            <comment pinned="true" h="98" w="345">Take union (combine) input SRS and those directly linked from IssueFD) and ensure these are put into output SRS.</comment>
                          </block>
                        </statement>
                        <statement name="Output">
                          <block type="artuse" id="T$id^c^020oLJnAlrcdt">
                            <field name="roletext">Param</field>
                            <value name="NAME">
                              <block type="variables_get" id="U:~jYs63SW+MeJm_9E`N">
                                <field name="VAR" id="Xg1A%?@40.5oj`/g[|@f">SRS</field>
                              </block>
                            </value>
                          </block>
                        </statement>
                        <statement name="QA">
                          <block type="qacheck" id="`W59JI)(/7h{z9!wY.Fx">
                            <field name="qacheckId">AllReqReleased</field>
                            <field name="description">Are all requirements in state released?</field>
                            <value name="constraint">
                              <block type="text" id="[1j:oT_J5=E`;}jBg/(;">
                                <field name="TEXT">self.out_SRS-&gt;forAll(req | req.state.name = 'Released')</field>
                              </block>
                            </value>
                            <next>
                              <block type="qacheck" id="kYacZ{x*A2R|BaHy5kR?">
                                <field name="qacheckId">IssueFDhasParent</field>
                                <field name="description">Does the Issue FD has a parent</field>
                                <value name="constraint">
                                  <block type="text" id="FcSvWrqS]APJ-P+c]`%l">
                                    <field name="TEXT">self.in_IssueFD-&gt;forAll(issue | issue.relatedItems-&gt;select(link | link.linkType.name.equalsIgnoreCase('Parent'))-&gt;size() = 1)</field>
                                  </block>
                                </value>
                                <next>
                                  <block type="qacheck" id="2MoLRnA9[;J#W![Km5h5">
                                    <field name="qacheckId">IssueFDlinkedToCR</field>
                                    <field name="description">Is the Issue FD's parent a ChangeRequest</field>
                                    <value name="constraint">
                                      <block type="text" id="8[C_)!dNr]^bj//wP,Ax">
                                        <field name="TEXT">self.in_IssueFD-&gt;forAll(issue | issue.relatedItems-&gt;select(link | link.linkType.name.equalsIgnoreCase('Parent'))-&gt;collect(link2 : &lt;root/types/workitem_link&gt; | link2.linkTo) -&gt;select(refitem | refitem.workItemType.name.equalsIgnoreCase('Change Request') )-&gt;size() &gt;0 )</field>
                                      </block>
                                    </value>
                                  </block>
                                </next>
                              </block>
                            </next>
                          </block>
                        </statement>
                      </block>
                    </next>
                  </block>
                </next>
              </block>
            </next>
          </block>
        </next>
      </block>
    </statement>
  </block>
  <block type="variables_set" id="D+|LX?1DcRimuL8I+9-*" x="1987" y="162">
    <field name="VAR" id="x?oi7HVFSa$jZln(Pc[l">WorkProduct</field>
    <value name="VALUE">
      <block type="artifact" id="XM2I;Da%K^*$D/u0A2|M">
        <field name="Type">IJiraArtifact</field>
      </block>
    </value>
    <next>
      <block type="artuse" id="5(#~Spqa)}rq(XYhAW(p">
        <field name="roletext">Param</field>
        <value name="NAME">
          <block type="variables_get" id="q:gGJmh$!1MCCcy~xO1v">
            <field name="VAR" id="x?oi7HVFSa$jZln(Pc[l">WorkProduct</field>
          </block>
        </value>
        <next>
          <block type="step" id="dCqoq4Q,@61}DS}zP!C9">
            <field name="StepId">PrepareJointReview</field>
            <comment pinned="false" h="80" w="160">seems informal</comment>
            <statement name="Input">
              <block type="artuse" id="atg.6.4hh,2L4y8La=S;">
                <field name="roletext">Param</field>
                <value name="NAME">
                  <block type="variables_get" id="F0C,Y-z(E{|j#qzpCHg7">
                    <field name="VAR" id="x?oi7HVFSa$jZln(Pc[l">WorkProduct</field>
                  </block>
                </value>
              </block>
            </statement>
            <next>
              <block type="step" id="!tyPskHyJX4vbpdX2JXm">
                <field name="StepId">ConductJointReview</field>
                <statement name="Input">
                  <block type="artuse" id=":{z~i0?BbldQFNVR:t_V">
                    <field name="roletext">Param</field>
                    <value name="NAME">
                      <block type="variables_get" id="*~-f^*:v-y(8}UWL]Lka">
                        <field name="VAR" id="x?oi7HVFSa$jZln(Pc[l">WorkProduct</field>
                      </block>
                    </value>
                  </block>
                </statement>
                <statement name="Transitions">
                  <block type="transition" id="yyWzRoLRK_*f0/gMA7ut">
                    <field name="State">POSTCONDITION</field>
                    <value name="condition">
                      <block type="text" id="2trmX=uwQ17y4ydwzp:)">
                        <field name="TEXT">self.out_RR = "initial"</field>
                      </block>
                    </value>
                  </block>
                </statement>
                <statement name="Datamappings">
                  <block type="datamapping" id="t1gxVl@^]WE#LlT`s6i.">
                    <field name="mappingId">WorkProducttoRR</field>
                    <field name="mappingSpec">matching id / link between work product and review</field>
                  </block>
                </statement>
                <statement name="Output">
                  <block type="variables_set" id="^m/!yA-bpl@($CMBCx3W">
                    <field name="VAR" id="5o505OVo%.@P^`u|31`P">ReviewReport</field>
                    <value name="VALUE">
                      <block type="artifact" id="0cv?h/=4X!?{PImCmBcx">
                        <field name="Type">IJiraArtifact</field>
                      </block>
                    </value>
                    <next>
                      <block type="artuse" id="X|/vg@U*.,kcTk{pxKJG">
                        <field name="roletext">Param</field>
                        <value name="NAME">
                          <block type="variables_get" id="q`rAxqq#kZYpk$hfjE=L">
                            <field name="VAR" id="5o505OVo%.@P^`u|31`P">ReviewReport</field>
                          </block>
                        </value>
                      </block>
                    </next>
                  </block>
                </statement>
                <statement name="QA">
                  <block type="qacheck" id="?DWSQ_XM9yU-jM-DA!@,">
                    <field name="qacheckId">rr-results</field>
                    <field name="description">Review results present in the report</field>
                    <value name="constraint">
                      <block type="text" id="hy{$6]oGC~)CO`Du8fPe">
                        <field name="TEXT">self.out_RR.results &lt;&gt; null</field>
                      </block>
                    </value>
                  </block>
                </statement>
                <next>
                  <block type="step" id="|ceR1-HlB{iu}Jx;#),t">
                    <field name="StepId">DistributeResults</field>
                    <statement name="Input">
                      <block type="artuse" id="b1tlyk#VJiG`#b|rtvX_">
                        <field name="roletext">Param</field>
                        <value name="NAME">
                          <block type="variables_get" id="9BG-ozCj{M1l|rKx67qa">
                            <field name="VAR" id="5o505OVo%.@P^`u|31`P">ReviewReport</field>
                          </block>
                        </value>
                      </block>
                    </statement>
                    <statement name="Transitions">
                      <block type="transition" id="ujF?.Dw4VWm@TEBxDq={">
                        <field name="State">POSTCONDITION</field>
                        <value name="condition">
                          <block type="text" id="P7#P{Eg{zE!hYe|IDM|o">
                            <field name="TEXT">self.out_RR = "recorded"</field>
                          </block>
                        </value>
                      </block>
                    </statement>
                    <statement name="Output">
                      <block type="artuse" id="`#oV+{F)qR{V%TB/09H4">
                        <field name="roletext">Param</field>
                        <value name="NAME">
                          <block type="variables_get" id="pD~5K6=WW`:]ty.r=^];">
                            <field name="VAR" id="5o505OVo%.@P^`u|31`P">ReviewReport</field>
                          </block>
                        </value>
                      </block>
                    </statement>
                    <statement name="QA">
                      <block type="qacheck" id="b5[eN68yG}[rLcTAhqyn">
                        <field name="qacheckId">rr-owner</field>
                        <field name="description">Report owner set</field>
                        <value name="constraint">
                          <block type="text" id="liCr_w5=:O_!SM3|vAPS">
                            <field name="TEXT">self.out_RR.owner &lt;&gt; null</field>
                          </block>
                        </value>
                      </block>
                    </statement>
                    <next>
                      <block type="step" id="b*ml}E9%e``pD:$2dpT;">
                        <field name="StepId">TrackFindings</field>
                        <statement name="Input">
                          <block type="artuse" id="c`d,cM8d6Y!wZ{EeAwHq">
                            <field name="roletext">Param</field>
                            <value name="NAME">
                              <block type="variables_get" id="81m~/B@PDTKyD;iENMz*">
                                <field name="VAR" id="5o505OVo%.@P^`u|31`P">ReviewReport</field>
                              </block>
                            </value>
                            <next>
                              <block type="artuse" id="(yruE9$%jfH#98,K4+K]">
                                <field name="roletext">Param</field>
                                <value name="NAME">
                                  <block type="variables_get" id="mp#B{/%5bXp{6=w!S;6Q">
                                    <field name="VAR" id="x?oi7HVFSa$jZln(Pc[l">WorkProduct</field>
                                  </block>
                                </value>
                              </block>
                            </next>
                          </block>
                        </statement>
                        <statement name="Transitions">
                          <block type="transition" id="_xaV.H20l#x@DyNnRrlc">
                            <field name="State">POSTCONDITION</field>
                            <value name="condition">
                              <block type="text" id="nvm]AG5m.pk-1%e|aV@O">
                                <field name="TEXT">self.out_RR = "resolved"</field>
                              </block>
                            </value>
                          </block>
                        </statement>
                        <statement name="Output">
                          <block type="artuse" id="Qv){gMY]KrvA24Et7z$5">
                            <field name="roletext">Param</field>
                            <value name="NAME">
                              <block type="variables_get" id="e0rJUgxo]y|bnu3TB`t3">
                                <field name="VAR" id="5o505OVo%.@P^`u|31`P">ReviewReport</field>
                              </block>
                            </value>
                          </block>
                        </statement>
                        <next>
                          <block type="artuse" id="QU[g?~:!wm+s4}b!/bwm">
                            <field name="roletext">Param</field>
                            <value name="NAME">
                              <block type="variables_get" id="Q!KeE9q}Ik.Y|K=~4nB;">
                                <field name="VAR" id="5o505OVo%.@P^`u|31`P">ReviewReport</field>
                              </block>
                            </value>
                          </block>
                        </next>
                      </block>
                    </next>
                  </block>
                </next>
              </block>
            </next>
          </block>
        </next>
      </block>
    </next>
  </block>
  <block type="text" id="Whx::wrqKRLM5yNyrEoe" x="1612" y="337">
    <field name="TEXT">self.in_SRS-&gt;union( self.in_IssueFD-&gt;any()   -&gt;asType(&lt;root/types/azure_workitem&gt;) .relatedItems -&gt;select(link | link.linkType.name.equalsIgnoreCase('Affects')) -&gt;collect(link2 : &lt;root/types/workitem_link&gt; | link2.linkTo) -&gt;select(refitem | refitem.workItemType.name.equalsIgnoreCase('Requirement') ) -&gt;asSet())-&gt;exists(req : &lt;root/types/azure_workitem&gt; | req.state.name&lt;&gt;'Released')</field>
  </block>
  <block type="transition" id="J`CA%YJujYPX|lmbAril" x="2612" y="412">
    <field name="State">PRECONDITION</field>
    <value name="condition">
      <block type="text" id="Qqc8E6M.c^lelhhA~4e-">
        <field name="TEXT">self.in_workproduct = "draft"</field>
      </block>
    </value>
  </block>
  <block type="step" id="!9!*))gJ~Wn#!XT3[%kj" x="912" y="1162">
    <field name="StepId">CreateOrUpdateFunctionalSpec</field>
    <statement name="Input">
      <block type="artuse" id="YyWILwCo@ntu1|`.QnDE">
        <field name="roletext">Param</field>
        <value name="NAME">
          <block type="variables_get" id="D-fG!k:-~xp~tQkjGh+g">
            <field name="VAR" id="n~zSfOoBX_-ZfBjz?5GK">IssueFD</field>
          </block>
        </value>
        <next>
          <block type="artuse" id="o|]}MMrlvOdJ+pncd9Zq">
            <field name="roletext">Param</field>
            <value name="NAME">
              <block type="variables_get" id="n_[wDbrl8F|cnt`EO*Fr">
                <field name="VAR" id="Xg1A%?@40.5oj`/g[|@f">SRS</field>
              </block>
            </value>
          </block>
        </next>
      </block>
    </statement>
    <statement name="Transitions">
      <block type="transition" id="T;D^II/T@:=J-,iWQB6y">
        <field name="State">POSTCONDITION</field>
        <value name="condition">
          <block type="text" id="Dm+8oKalke`?@h_2o7AB">
            <field name="TEXT">self.out_FS.state = "draft"</field>
          </block>
        </value>
      </block>
    </statement>
    <statement name="Datamappings">
      <block type="datamapping" id="s02RGLZDZtnP|E%3y]I9">
        <field name="mappingId">reqtoFS</field>
        <field name="mappingSpec">all requirements are represented in function specifications</field>
      </block>
    </statement>
    <statement name="Output">
      <block type="variables_set" id="F]pMLlFqjUq)[V(Iy%{a">
        <field name="VAR" id="x[DEUC1Fo-%{4u`GK8vp">FunctionalSpecification</field>
        <value name="VALUE">
          <block type="artifact" id="4,ujx.)tV=7Sdy4^qZ;y">
            <field name="Type">IJiraArtifact</field>
          </block>
        </value>
        <next>
          <block type="artuse" id="~KahsVjOQ4h(_SqbEn[`">
            <field name="roletext">Param</field>
            <value name="NAME">
              <block type="variables_get" id="=_x0~.LGj#=gJWytC#`k">
                <field name="VAR" id="x[DEUC1Fo-%{4u`GK8vp">FunctionalSpecification</field>
              </block>
            </value>
          </block>
        </next>
      </block>
    </statement>
    <statement name="QA">
      <block type="qacheck" id="edTcA3?{?1JI/hM~vvtm">
        <field name="qacheckId">fs-interface</field>
        <field name="description">FS interfaces has to be defined</field>
        <value name="constraint">
          <block type="text" id="`D$P7sfDTHR;_)Tq=ckE">
            <field name="TEXT">self.out_FS.interface &lt;&gt; null</field>
          </block>
        </value>
        <next>
          <block type="qacheck" id="n-.ZN~$%D/s/DB-pMF59">
            <field name="qacheckId">fs-extvisfunc</field>
            <field name="description">FS externally visible functions has to be defined</field>
            <value name="constraint">
              <block type="text" id=")-oGjk+62u5!dEo5$Ij]">
                <field name="TEXT">self.out_FS.extvisfunc &lt;&gt; null</field>
              </block>
            </value>
            <next>
              <block type="qacheck" id=".LLttDcT4qU{*ZO!N;aa">
                <field name="qacheckId">fs-errorhandle</field>
                <field name="description">FS error handling defined</field>
                <value name="constraint">
                  <block type="text" id="hN(TNa4}vL^YdI3:+R$u">
                    <field name="TEXT">self.out_FS.errorHandling &lt;&gt; null</field>
                  </block>
                </value>
                <next>
                  <block type="qacheck" id=".We87|)R2N]G^zj4Nlc=">
                    <field name="qacheckId">fs-envcond</field>
                    <field name="description">FS environmental conditions are defined</field>
                    <value name="constraint">
                      <block type="text" id="1vi=!nnZeiV{*u6]mQZ+">
                        <field name="TEXT">self.out_FS.envConditions &lt;&gt; null</field>
                      </block>
                    </value>
                  </block>
                </next>
              </block>
            </next>
          </block>
        </next>
      </block>
    </statement>
  </block>
  <block type="transition" id="e-D4kBiAAlx.(P]0l{n)" x="2488" y="1088">
    <field name="State">POSTCONDITION</field>
    <value name="condition">
      <block type="text" id="*+k{k65QG,U(ZZQ(7XC-">
        <field name="TEXT">self.in_WorkProduct = "reviewed"</field>
      </block>
    </value>
  </block>
  <block type="step" id="fA8Ov**kly!X}:@{lu1j" x="938" y="1863">
    <field name="StepId">ReactUponReviewResult</field>
    <statement name="Input">
      <block type="artuse" id="au@;(9;;g*2cchFsxW^8">
        <field name="roletext">Param</field>
        <value name="NAME">
          <block type="variables_get" id="pjxnqO._5-;-::}0mYDO">
            <field name="VAR" id="x[DEUC1Fo-%{4u`GK8vp">FunctionalSpecification</field>
          </block>
        </value>
        <next>
          <block type="artuse" id="N:njm!YV]f5_*ok-VMdo">
            <field name="roletext">Param</field>
            <value name="NAME">
              <block type="variables_get" id="Aw@jhb]j3[?9Rpwb(]qP">
                <field name="VAR" id="5o505OVo%.@P^`u|31`P">ReviewReport</field>
              </block>
            </value>
          </block>
        </next>
      </block>
    </statement>
    <statement name="Transitions">
      <block type="transition" id="2Erg`t:Yohd/Mz~tVfbW">
        <field name="State">PRECONDITION</field>
        <value name="condition">
          <block type="text" id="Hh}%(M6qsg}L*Xo`:$Rv">
            <field name="TEXT">self.in_RR.state = "resolved"</field>
          </block>
        </value>
        <next>
          <block type="transition" id="=u{p[irDVsnfm_U$1=YO">
            <field name="State">POSTCONDITION</field>
            <value name="condition">
              <block type="text" id="kQ$8~ePP+g^((W+_dW+S">
                <field name="TEXT">self.in_FS.state = "released"</field>
              </block>
            </value>
          </block>
        </next>
      </block>
    </statement>
    <next>
      <block type="artuse" id="DT23#!7?.ngv?_gz0?SJ">
        <field name="roletext">Param</field>
        <value name="NAME">
          <block type="variables_get" id="3/iIG,e#BG@^{=5jIfnE">
            <field name="VAR" id="Xg1A%?@40.5oj`/g[|@f">SRS</field>
          </block>
        </value>
      </block>
    </next>
  </block>
</xml>